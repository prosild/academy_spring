<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mis.mapper.BoardMapper">
	
	<insert id="create">
		INSERT INTO tbl_board (bno, title, content, writer)
		VALUES (seq_board.nextval, #{title}, #{content}, #{writer})
	</insert>
	
	<select id="read" resultType="com.mis.domain.BoardVO">
		SELECT b.bno
		     , b.title
		     , b.content
		     , b.writer
		     , b.regdate
		     , b.viewcnt
		  FROM tbl_board b
		 WHERE b.bno = #{bno}
	</select>
	
	<update id="update">
		UPDATE tbl_board b
		   SET b.title = #{title}
		     , b.content = #{content}
		     , b.writer = #{writer}
		 WHERE b.bno = #{bno}
	</update>
	
	<delete id="delete">
		DELETE FROM tbl_board b
 		 WHERE b.bno = #{bno}
	</delete>
	
	<select id="listAll" resultType="com.mis.domain.BoardVO">
		<![CDATA[
		SELECT b.bno
			 , b.title
			 , b.content
			 , b.writer
			 , b.regdate
			 , b.viewcnt
		  FROM tbl_board b
		 WHERE b.bno > 0
		 ORDER BY b.bno DESC
		        , b.regdate DESC
		]]>
	</select>
	
	<update id="updateViewCnt">
		UPDATE tbl_board b
		   SET b.viewcnt = b.viewcnt + 1
		 WHERE b.bno = #{bno}
	</update>
	
</mapper>